@page
@model RulesModel
@{
    ViewData["Title"] = "Правила бронирования и использования";
    Layout = "~/Pages/Shared/_InfoLayout.cshtml";
}

@section Breadcrumbs {
    <li class="breadcrumb-item active" aria-current="page">Правила</li>
}

<div class="text-center mb-5">
    <h1 class="display-4">Правила и условия</h1>
    <p class="lead">Ознакомьтесь с правилами бронирования, использования сервиса и политикой конфиденциальности</p>
</div>

<div class="row">
    <!-- Навигация по разделам -->
    <div class="col-lg-3 mb-4">
        <div class="sticky-top" style="top: 20px;">
            <div class="list-group">
                <a class="list-group-item list-group-item-action active" href="#booking-rules">
                    📅 Правила бронирования
                </a>
                <a class="list-group-item list-group-item-action" href="#payment-rules">
                    💳 Условия оплаты
                </a>
                <a class="list-group-item list-group-item-action" href="#changes-refunds">
                    🔄 Изменения и возвраты
                </a>
                <a class="list-group-item list-group-item-action" href="#privacy-policy">
                    🛡️ Конфиденциальность
                </a>
                <a class="list-group-item list-group-item-action" href="#service-terms">
                    ⚖️ Условия использования
                </a>
            </div>
        </div>
    </div>

    <!-- Основной контент -->
    <div class="col-lg-9">
        <!-- Правила бронирования -->
        <section id="booking-rules" class="card mb-5">
            <div class="card-header bg-primary text-white">
                <h2 class="h4 mb-0">📅 Правила бронирования</h2>
            </div>
            <div class="card-body">
                <div class="rules-content">
                    <h3>1.1 Процесс бронирования</h3>
                    <p>Для завершения бронирования необходимо:</p>
                    <ul>
                        <li>Предоставить точные и полные данные всех пассажиров</li>
                        <li>Подтвердить согласие с правилами тарифа</li>
                        <li>Оплатить бронирование в установленные сроки</li>
                    </ul>

                    <h3>1.2 Данные пассажиров</h3>
                    <p>Обязательно указывайте:</p>
                    <ul>
                        <li><strong>ФИО</strong> - точно как в документе, удостоверяющем личность</li>
                        <li><strong>Дата рождения</strong> - для всех пассажиров</li>
                        <li><strong>Контактные данные</strong> - актуальный email и телефон</li>
                        <li><strong>Данные документа</strong> - серия и номер паспорта</li>
                    </ul>

                    <h3>1.3 Подтверждение бронирования</h3>
                    <p>После оплаты вы получаете:</p>
                    <ul>
                        <li>Электронный билет на указанный email</li>
                        <li>Подтверждение бронирования с номером PNR</li>
                        <li>Инструкцию по регистрации на рейс</li>
                    </ul>

                    <div class="alert alert-warning mt-3">
                        <strong>Важно:</strong> Проверяйте правильность данных перед оплатой.
                        Изменения после оплаты могут облагаться дополнительными сборами.
                    </div>
                </div>
            </div>
        </section>

        <!-- Условия оплаты -->
        <section id="payment-rules" class="card mb-5">
            <div class="card-header bg-success text-white">
                <h2 class="h4 mb-0">💳 Условия оплаты</h2>
            </div>
            <div class="card-body">
                <h3>2.1 Способы оплаты</h3>
                <p>Мы принимаем следующие способы оплаты:</p>
                <div class="row">
                    <div class="col-md-6">
                        <ul>
                            <li>Банковские карты (Visa, MasterCard, Мир)</li>
                            <li>Электронные кошельки (ЮMoney, Qiwi)</li>
                            <li>Интернет-банкинг</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul>
                            <li>Мобильные платежи (Apple Pay, Google Pay)</li>
                            <li>Криптовалюты (Bitcoin, Ethereum)</li>
                            <li>Банковские переводы</li>
                        </ul>
                    </div>
                </div>

                <h3>2.2 Безопасность платежей</h3>
                <p>Все платежи защищены:</p>
                <ul>
                    <li>SSL-шифрование данных</li>
                    <li>Сертификация PCI DSS</li>
                    <li>3-D Secure аутентификация</li>
                    <li>Мониторинг мошеннических операций</li>
                </ul>

                <h3>2.3 Валюты оплаты</h3>
                <p>Оплата возможна в следующих валютах:</p>
                <ul>
                    <li>Белорусский рубль (BYN)</li>
                    <li>Доллар США (USD)</li>
                    <li>Евро (EUR)</li>
                </ul>

                <div class="alert alert-info mt-3">
                    <strong>Курс валют:</strong> Конвертация происходит по курсу банка-эмитента вашей карты.
                </div>
            </div>
        </section>

        <!-- Изменения и возвраты -->
        <section id="changes-refunds" class="card mb-5">
            <div class="card-header bg-warning text-dark">
                <h2 class="h4 mb-0">🔄 Изменения и возвраты</h2>
            </div>
            <div class="card-body">
                <h3>3.1 Изменение бронирования</h3>
                <p>Возможности изменения зависят от тарифа авиакомпании:</p>

                <table class="table table-bordered">
                    <thead class="table-light">
                        <tr>
                            <th>Тип тарифа</th>
                            <th>Изменение даты</th>
                            <th>Изменение маршрута</th>
                            <th>Сбор за изменение</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Эконом (невозвратный)</td>
                            <td>❌ Не разрешено</td>
                            <td>❌ Не разрешено</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Эконом (возвратный)</td>
                            <td>✅ За 48 часов</td>
                            <td>❌ Не разрешено</td>
                            <td>25 USD</td>
                        </tr>
                        <tr>
                            <td>Бизнес-класс</td>
                            <td>✅ За 24 часа</td>
                            <td>✅ За 72 часа</td>
                            <td>75 USD</td>
                        </tr>
                    </tbody>
                </table>

                <h3>3.2 Возврат средств</h3>
                <p>Условия возврата:</p>
                <ul>
                    <li><strong>Полный возврат:</strong> Отмена рейса авиакомпанией</li>
                    <li><strong>Частичный возврат:</strong> Возвращаемые тарифы (за вычетом сборов)</li>
                    <li><strong>Невозврат:</strong> Невозвращаемые тарифы (возврат только налогов)</li>
                </ul>

                <h3>3.3 Процедура возврата</h3>
                <ol>
                    <li>Подайте заявку через личный кабинет</li>
                    <li>Дождитесь подтверждения авиакомпании</li>
                    <li>Получите средства в течение 7-30 рабочих дней</li>
                </ol>
            </div>
        </section>

        <!-- Политика конфиденциальности -->
        <section id="privacy-policy" class="card mb-5">
            <div class="card-header bg-info text-white">
                <h2 class="h4 mb-0">🛡️ Политика конфиденциальности</h2>
            </div>
            <div class="card-body">
                <h3>4.1 Сбор информации</h3>
                <p>Мы собираем только необходимую информацию:</p>
                <ul>
                    <li>Данные для бронирования (ФИО, дата рождения, паспортные данные)</li>
                    <li>Контактная информация (email, телефон)</li>
                    <li>Платежные данные (обрабатываются платежным шлюзом)</li>
                    <li>Техническая информация (IP-адрес, браузер, cookies)</li>
                </ul>

                <h3>4.2 Использование данных</h3>
                <p>Ваши данные используются для:</p>
                <ul>
                    <li>Оформления авиабилетов</li>
                    <li>Уведомлений о статусе рейсов</li>
                    <li>Улучшения качества сервиса</li>
                    <li>Предотвращения мошенничества</li>
                </ul>

                <h3>4.3 Защита данных</h3>
                <p>Мы обеспечиваем:</p>
                <ul>
                    <li>Шифрование передаваемых данных</li>
                    <li>Регулярные проверки безопасности</li>
                    <li>Ограничение доступа к данным</li>
                </ul>

                <div class="alert alert-success mt-3">
                    <strong>GDPR:</strong> Мы соблюдаем Общий регламент защиты данных для пользователей из ЕС.
                </div>
            </div>
        </section>

        <!-- Условия использования -->
        <section id="service-terms" class="card mb-5">
            <div class="card-header bg-secondary text-white">
                <h2 class="h4 mb-0">⚖️ Условия использования сервиса</h2>
            </div>
            <div class="card-body">
                <h3>5.1 Общие положения</h3>
                <p>Используя наш сервис, вы соглашаетесь:</p>
                <ul>
                    <li>Предоставлять достоверную информацию</li>
                    <li>Соблюдать правила авиаперевозчиков</li>
                    <li>Не использовать сервис для незаконных целей</li>
                    <li>Уважать интеллектуальную собственность</li>
                </ul>

                <h3>5.2 Ответственность</h3>
                <p>Мы несем ответственность за:</p>
                <ul>
                    <li>Корректность информации о рейсах</li>
                    <li>Безопасность платежных операций</li>
                    <li>Своевременное оформление документов</li>
                </ul>

                <h3>5.3 Ограничения ответственности</h3>
                <p>Мы не несем ответственность за:</p>
                <ul>
                    <li>Изменения рейсов авиакомпаниями</li>
                    <li>Действия третьих лиц</li>
                    <li>Форс-мажорные обстоятельства</li>
                    <li>Неправильно введенные пользователем данные</li>
                </ul>

                <h3>5.4 Изменение условий</h3>
                <p>Мы оставляем за собой право:</p>
                <ul>
                    <li>Изменять условия использования</li>
                    <li>Обновлять тарифы и сборы</li>
                    <li>Вносить изменения в функционал</li>
                </ul>

                <div class="alert alert-warning mt-4">
                    <h5 class="alert-heading">⚠️ Важное уведомление</h5>
                    <p class="mb-0">
                        Настоящие правила вступают в силу с момента принятия и действуют до их отмены.
                        Регулярно проверяйте обновления на этой странице.
                    </p>
                </div>

                <div class="text-center mt-4">
                    <p class="text-muted">
                        <small>Дата последнего обновления: @DateTime.Now.ToString("dd.MM.yyyy")</small>
                    </p>
                </div>
            </div>
        </section>
    </div>
</div>

@section Scripts {
    <script>
        // Плавная прокрутка к якорям
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Подсветка активного раздела в навигации
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.list-group-item');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (pageYOffset >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Автоматическое открытие первого раздела
        document.addEventListener('DOMContentLoaded', function() {
            const firstSection = document.querySelector('section');
            if (firstSection) {
                firstSection.scrollIntoView({ behavior: 'smooth' });
            }
        });
    </script>

    <style>
        .sticky-top {
            position: -webkit-sticky;
            position: sticky;
        }

        section {
            scroll-margin-top: 20px;
        }

        .list-group-item.active {
            background-color: #0d6efd;
            border-color: #0d6efd;
            font-weight: 600;
        }

        .card {
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .card-header {
            border-bottom: 2px solid rgba(0,0,0,0.1);
        }

        h3 {
            color: #2c3e50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }

            h3:first-child {
                margin-top: 0;
            }

        .table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        .alert {
            border-left: 4px solid;
        }
    </style>
}